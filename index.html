<html>
<head>
	<link rel="stylesheet" href="style.css" />
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
	<script>
		/*
 * Keynav - jQuery Keyboard Navigation plugin
 *
 * Copyright (c) 2013 Nick Ostrovsky
 *
 * Licensed under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 *
 * Project home:
 *   http://www.firedev.com/jquery.keynav
 *
 * Version:  0.1
 *
 */
(function($) {
    $.fn.goTo = function() {
        $('html, body').animate({
            scrollTop: $(this).offset().top - 25 +'px'
        }, 'fast');
        return this; // for chaining...
    }
})(jQuery);

;(function($, window, document, undefined) {

	$.fn.keynav = function(checkNav) {
		var elements = this;
		var matrix;
		var x;
		var y;
		var current = this.filter('.selected');
		var keyNavigationDisabled=false;
		if (current.length == 0) current = this.first();

		current.addClass('selected');

		function isScrolledIntoView(elem){
		    var $elem = $(elem);
		    var $window = $(window);

		    var docViewTop = $window.scrollTop();
		    var docViewBottom = docViewTop + $window.height();

		    var elemTop = $elem.offset().top;
		    var elemBottom = elemTop + $elem.height();

		    return ((docViewTop < elemTop) && (docViewBottom > elemBottom));
		}

		function update() {
			var i=0;
			var row = Array();
			var j = -1;
			var oldtop = false;
			var m=Array();

			elements.each(function(){
				if (!oldtop) oldtop = this.offsetTop;
				newtop=this.offsetTop;
				if (newtop != oldtop) {
					oldtop=newtop;
					m[i]=row;
					row = Array();
					i++;
					j=0;
					row[j]=this;
				} else {
					j++;
					row[j]=this;
				}
			});
			m[i]=row;
			matrix = m;
			coordinates=findCurrent();
			x=coordinates[0];
			y=coordinates[1];
			return matrix;
		}

		function findCurrent() {
			i=0; j=0; found = false;
			try {
				for (i=0; i<matrix.length; i++) {
					row=matrix[i];
					for (j=0; j<row.length; j++) {
						if (current[0] == row[j]) {
							throw([i,j]);
						}

					}
				}
			}
			catch (arr)
			{
				found = [i,j]
			}
			return(found);
		}

		function setCurrent(i,j) {
			if (i<0) i=(matrix.length-1);
			if (i>=matrix.length) i=0;
			if (j<0) j=(matrix[i].length-1);
			if (j>=matrix[i].length) j=0;
			current.removeClass('selected');
			current = $(matrix[i][j]);
			current.addClass('selected');
			x=i;
			y=j;
			if(!isScrolledIntoView(current)){
				if(x == 0){
					$("#top").goTo();
					console.log("going to top...")
				}
				current.goTo();
			}
		}

		$(window).bind("resize", function(event) {
			update();
		});

		$(document).ready(function() {
			update();
		});


		$(document).keydown(function(e){
			if (checkNav && checkNav()) return;
			if (e.keyCode == 37) {
				// left
				setCurrent(x,y-1);
				e.preventDefault();
			} else if (e.keyCode == 38) {
				// up
				setCurrent(x-1,y);
				e.preventDefault();
			} else if (e.keyCode == 39) {
				// right
				setCurrent(x,y+1);
				e.preventDefault();
			} else if (e.keyCode == 40) {
				// down
				setCurrent(x+1,y);
				e.preventDefault();
			} else if (e.keyCode == 13) {
				console.log(x+", "+y)
				e.preventDefault();
			}
		});


		return this;
	}

})(jQuery, window, document);


    </script>
</head>
<body>
	<a href="#" id="top"></a>
	<ul class="nav_holder clearfix">
		<li>
			<a href="#link" class="selected">Navigation</a>
		</li>
		<li>
			<a href="#link">Navigation</a>
		</li>
		<li>
			<a href="#link">Navigation</a>
		</li>
		<li>
			<a href="#link">Navigation</a>
		</li>
		<li>
			<a href="#link">Navigation</a>
		</li>
		<li>
			<a href="#link">Navigation</a>
		</li>
		<li>
			<a href="#link">Navigation</a>
		</li>
		<li class="wide">
			<a href="#link">Navigation</a>
		</li>
		<li>
			<a href="#link">Navigation</a>
		</li>
		<li>
			<a href="#link">Navigation</a>
		</li>
		<li>
			<a href="#link">Navigation</a>
		</li>
		<li>
			<a href="#link">Navigation</a>
		</li>
		<li>
			<a href="#link">Navigation</a>
		</li>
		<li>
			<a href="#link">Navigation</a>
		</li>
		<li>
			<a href="#link">Navigation</a>
		</li>
		<li>
			<a href="#link">Navigation</a>
		</li>
		<li>
			<a href="#link">Navigation</a>
		</li>
		<li>
			<a href="#link">Navigation</a>
		</li>
		<li>
			<a href="#link">Navigation</a>
		</li>
		<li>
			<a href="#link">Navigation</a>
		</li>
		<li>
			<a href="#link">Navigation</a>
		</li>
		<li>
			<a href="#link">Navigation</a>
		</li>
		<li>
			<a href="#link">Navigation</a>
		</li>
		<li>
			<a href="#link">Navigation</a>
		</li>
		<li>
			<a href="#link">Navigation</a>
		</li>
		<li>
			<a href="#link">Navigation</a>
		</li>
		<li>
			<a href="#link">Navigation</a>
		</li>
		<li>
			<a href="#link">Navigation</a>
		</li>
		<li>
			<a href="#link">Navigation</a>
		</li>
		<li>
			<a href="#link">Navigation</a>
		</li>
	</ul>
	<script>
		a=$('.nav_holder a').keynav();
	</script>
</body>
</html>